{"version":3,"sources":["teachers.js"],"names":[],"mappings":"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","file":"teachers-compiled.js","sourcesContent":["/**\n * Created by jonathan on 03/03/16.\n */\n'use strict';\n\nmodule.exports =  (express, io) => {\n\n    const router = express.Router();\n    const auth = require('../auth/auth');\n    const teachersController = require('../controller/teachers-controller');\n    const utils = require('../utils/utils');\n\n    io.on('connection',  (socket) => {\n        console.log('Connection on Teachers');\n        /*socket.on('big', ()=> {\n         console.log('big');\n         });\n         socket.emit('get', { 'get':'Express' });*/\n    });\n\n    /* Middleware for authentication */\n    router.use( (req, res, next) => {\n        return auth.ensureAuthenticated(req, res, next);\n    });\n\n    /* GET Teacher listing. */\n    router.get('/',  (req, res) => {\n        teachersController.listTeachers()\n            .then( (teachers) => {\n                res.json({\n                    success: true,\n                    data: teachers\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n\n    });\n\n    /* GET Teacher by ID. */\n    router.get('/:id',  (req, res) => {\n        let teacher = {\n            _id: req.params.id || ''\n        };\n\n        teachersController.validateTeacher(teacher, utils.OPERATION_STATUS.SELECT)\n            .then( (item) => {\n                return teachersController.getById(item['_id'])\n            })\n            .then( (teacher) => {\n                if (teacher) {\n                    res.json({\n                        success: true,\n                        data: teacher\n                    });\n                } else {\n                    res.status(404).json({\n                        success: false,\n                        data: '404 - Not Found'\n                    });\n                }\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n    /* POST create a Teacher */\n    router.post('/',  (req, res) => {\n        let teacher = {\n            identify: req.body.identify || '',\n            name: req.body.name || '',\n            gender: req.body.gender || '',\n            dob: req.body.dob || '',\n            active: req.body.active || '1',\n            social_number: req.body.social_number || ''\n        };\n\n        teachersController.validateTeacher(teacher, utils.OPERATION_STATUS.NEW)\n            .then(teachersController.createTeacher)\n            .then( (result) => {\n                res.json({\n                    success: true,\n                    data: result\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n\n    /* PUT update a Teacher */\n    router.put('/',  (req, res) => {\n        let teacher = {\n            _id: req.body._id || '',\n            identify: req.body.identify || '',\n            name: req.body.name || '',\n            gender: req.body.gender || '',\n            dob: req.body.dob || '',\n            active: req.body.active || '1',\n            social_number: req.body.social_number || ''\n        };\n\n        teachersController.validateTeacher(teacher, utils.OPERATION_STATUS.UPDATE)\n            .then(teachersController.updateTeacher)\n            .then( (result) => {\n                res.json({\n                    success: true,\n                    data: result\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n\n    /* DELETE remove a Teacher by ID. */\n    router.delete('/:id',  (req, res) => {\n        let teacher = {\n            _id: req.params.id || ''\n        };\n\n        teachersController.validateTeacher(teacher, utils.OPERATION_STATUS.DELETE)\n            .then( (pteacher) => {\n                return teachersController.removeById(pteacher['_id'])\n            })\n            .then( (result) => {\n                if (result) {\n                    res.json({\n                        success: true,\n                        data: result\n                    });\n                } else {\n                    res.status(404).json({\n                        success: false,\n                        data: '404 - Not Found'\n                    });\n                }\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n\n    /* POST add a Subject. */\n    router.post('/:id/add-subject',  (req, res) => {\n        let subject = {\n            _id: req.params.id || '',\n            _idsubject: req.body._idsubject || '',\n            description: req.body.description || ''\n        };\n\n        teachersController.addSubject(subject)\n            .then( (teacher) => {\n                res.json({\n                    success: true,\n                    data: teacher\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n\n    /* DELETE remove a subject. */\n    router.delete('/:id/remove-subject/:idsubject',  (req, res) => {\n        let subject = {\n            _id: req.params.id || '',\n            _idsubject: req.params.idsubject || ''\n        };\n\n        teachersController.removeSubject(subject)\n            .then( (teacher) => {\n                res.json({\n                    success: true,\n                    data: teacher\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n    /* POST add a schedule. */\n    router.post('/:id/add-schedule',  (req, res) => {\n        let duration = {\n            start: '',\n            end: ''\n        };\n\n        duration.start = (req.body.duration && req.body.duration.start || '');\n        duration.end = (req.body.duration && req.body.duration.end || '');\n\n        let item = {\n            _id: req.params.id || '',\n            day: req.body.day || '',\n            duration: duration\n        };\n\n\n        teachersController.addSchedule(item)\n            .then( (course) => {\n                res.json({\n                    success: true,\n                    data: course\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n    /* DELETE remove a schedule. */\n    router.delete('/:id/remove-schedule/:idschedule',  (req, res) => {\n        let item = {\n            _id: req.params.id || '',\n            _idschedule: req.params.idschedule || ''\n        };\n\n        teachersController.removeSchedule(item)\n            .then( (course) => {\n                res.json({\n                    success: true,\n                    data: course\n                });\n            })\n            .catch( (err) => {\n                res.json({\n                    success: false,\n                    data: err\n                });\n            });\n    });\n\n    return router;\n};"]}